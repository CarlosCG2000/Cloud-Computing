
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://migue.github.io/play-aws/manual/running/">
      
      
        <link rel="prev" href="../deploy/">
      
      
        <link rel="next" href="../../database/intro/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Running our application - PlayFramework and AWS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#running-the-play-application" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="PlayFramework and AWS" class="md-header__button md-logo" aria-label="PlayFramework and AWS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PlayFramework and AWS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Running our application
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="PlayFramework and AWS" class="md-nav__button md-logo" aria-label="PlayFramework and AWS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    PlayFramework and AWS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Local development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Local development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local/running/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running the app
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Manual deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Manual deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating the instance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying our application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Running our application
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Running our application
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fixing-our-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Fixing our deployment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#always-running" class="md-nav__link">
    <span class="md-ellipsis">
      Always running
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checking-the-status-of-the-service" class="md-nav__link">
    <span class="md-ellipsis">
      Checking the status of the service
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Production database
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Production database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/local-mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local MySQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dependencies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/rds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS RDS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/connecting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to RDS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scaling and fault-tolerance
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Scaling and fault-tolerance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scaling/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scaling/ami/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a snapshot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scaling/loadbalancing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load balancing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Infrastructure as Code
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Infrastructure as Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../iac/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../iac/why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../iac/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../iac/benefits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benefits
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Automated deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Automated deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automated/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automated/packer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building the image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automated/terraform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying the image
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About me
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fixing-our-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Fixing our deployment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#always-running" class="md-nav__link">
    <span class="md-ellipsis">
      Always running
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checking-the-status-of-the-service" class="md-nav__link">
    <span class="md-ellipsis">
      Checking the status of the service
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="running-the-play-application">Running the Play application</h1>
<p>We are ready to run our application for the first time. Go into your application folder and run the following command:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>./bin/agenda<span class="w"> </span>-Dhttp.port<span class="o">=</span><span class="m">80</span><span class="w"> </span>-Dplay.http.secret.key<span class="o">=</span><span class="s2">&quot;9gx9[jnPE&gt;zTDmzAC^p&lt;ETbLBsnljKEqhT1CSDDDYubCw?4^agPJX:2Rz1k2?h&lt;AaUB&quot;</span>
</code></pre></div>
<p>A couple of things to note here which are particularly tight to the Play framework:</p>
<p>If you look at your <code>conf/application.conf</code> file, you will find a configuration section that looks like this:</p>
<p><div class="highlight"><pre><span></span><code># Allowed hosts
play.filters.hosts {
  # Allow requests to example.com, its subdomains, and localhost:9000.
  allowed = [&quot;.amazonaws.com&quot;, &quot;localhost:9000&quot;]
}
</code></pre></div>
when you deploy a Play application you need to properly configure the <code>play.filters.hosts.allowed</code> configuration to allow requests from the domain you are deploying the application to. In this case, we are deploying the application to an AWS instance, so we need to allow requests from the AWS domain.</p>
<p>The <code>play.http.secret.key</code> configuration is used to signing session cookies and CSRF tokens and built in encryption utilities. It is important to keep this value secret and unique for each application. You can generate a new secret key by running the following command:</p>
<div class="highlight"><pre><span></span><code>sbt<span class="w"> </span>playGenerateSecret
</code></pre></div>
<p>The application should now be running and accessible via the instance's public IP address. What has happened? Did it work for your? In case it didn't, what do think we need to do to fix it?</p>
<h2 id="fixing-our-deployment">Fixing our deployment</h2>
<p>As you have already probably noticed, the application is not accessible from the outside world. This is because the Play application is running on port 80, but the instance's security group is not allowing traffic on that port.</p>
<p>Go back to the AWS console and click on the <code>Security Groups</code> link. Select the security group associated with the instance and click on the <code>Edit inbound rules</code> button. Add a new rule that allows traffic on port 80 from anywhere.</p>
<p>What would happen if we restart the instance? Would the application still be running? What do you think we need to do to make sure the application is always running? Let's try to figure it out together.</p>
<h2 id="always-running">Always running</h2>
<p>As we mentioned earlier, the application will stop running if the instance is restarted. To make sure the application is always running, we need to use a process manager like <code>systemd</code>.</p>
<p>In our AWS instance, we need to create a new service file in the <code>/etc/systemd/system</code> directory. Let's create a new file called <code>agenda.service</code>:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>vim<span class="w"> </span>/etc/systemd/system/agenda.service
</code></pre></div>
<p>with the following content:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span><span class="s2">&quot;Agenda Play application&quot;</span>

<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">WorkingDirectory</span><span class="o">=</span>/home/ubuntu/agenda-1.0-SNAPSHOT
<span class="nv">ExecStart</span><span class="o">=</span>
<span class="nv">ExecStop</span><span class="o">=</span>/bin/kill<span class="w"> </span>-TERM<span class="w"> </span><span class="nv">$MAINPID</span>
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">Restart</span><span class="o">=</span>always

<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</code></pre></div>
<p>Now we need to reload the systemd daemon and start the service:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload
sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>agenda
</code></pre></div>
<p>What would happen if you kill the process? Or if the application crashes? What would happen if the instance is restarted? You can try to simulate these scenarios and see what happens.</p>
<h2 id="checking-the-status-of-the-service">Checking the status of the service</h2>
<p>You can check the status of the service by running:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>agenda
</code></pre></div>
<p>and you can check the logs of the application by running:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>journalctl<span class="w"> </span>-u<span class="w"> </span>agenda
</code></pre></div>
<p>The output of the previous command should look something similar to:</p>
<div class="highlight"><pre><span></span><code>ubuntu@ip-172-31-4-87:~/agenda-1.0-SNAPSHOT$<span class="w"> </span>journalctl<span class="w"> </span>-u<span class="w"> </span>agenda<span class="w"> </span>-f
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:17:56<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>agenda<span class="o">[</span><span class="m">2438</span><span class="o">]</span>:<span class="w"> </span>INFO<span class="w">  </span>p.c.s.PekkoHttpServer<span class="w"> </span>-<span class="w"> </span>Running<span class="w"> </span>provided<span class="w"> </span>shutdown<span class="w"> </span>stop<span class="w"> </span>hooks
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:17:56<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>agenda.service:<span class="w"> </span>Main<span class="w"> </span>process<span class="w"> </span>exited,<span class="w"> </span><span class="nv">code</span><span class="o">=</span>exited,<span class="w"> </span><span class="nv">status</span><span class="o">=</span><span class="m">143</span>/n/a
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:17:56<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>agenda.service:<span class="w"> </span>Failed<span class="w"> </span>with<span class="w"> </span>result<span class="w"> </span><span class="s1">&#39;exit-code&#39;</span>.
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:17:56<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>Stopped<span class="w"> </span>agenda.service<span class="w"> </span>-<span class="w"> </span><span class="s2">&quot;Agenda Play application&quot;</span>.
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:17:56<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>agenda.service:<span class="w"> </span>Consumed<span class="w"> </span><span class="m">18</span>.591s<span class="w"> </span>CPU<span class="w"> </span>time,<span class="w"> </span><span class="m">63</span>.6M<span class="w"> </span>memory<span class="w"> </span>peak,<span class="w"> </span>0B<span class="w"> </span>memory<span class="w"> </span>swap<span class="w"> </span>peak.
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:18:04<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>Started<span class="w"> </span>agenda.service<span class="w"> </span>-<span class="w"> </span><span class="s2">&quot;Agenda Play application&quot;</span>.
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:18:06<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>agenda<span class="o">[</span><span class="m">2558</span><span class="o">]</span>:<span class="w"> </span>INFO<span class="w">  </span>p.a.h.HttpErrorHandlerExceptions<span class="w"> </span>-<span class="w"> </span>Registering<span class="w"> </span>exception<span class="w"> </span>handler:<span class="w"> </span>guice-provision-exception-handler
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:18:07<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>agenda<span class="o">[</span><span class="m">2558</span><span class="o">]</span>:<span class="w"> </span>INFO<span class="w">  </span>p.a.d.DefaultDBApi<span class="w"> </span>-<span class="w"> </span>Database<span class="w"> </span><span class="o">[</span>default<span class="o">]</span><span class="w"> </span>initialized
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:18:07<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>agenda<span class="o">[</span><span class="m">2558</span><span class="o">]</span>:<span class="w"> </span>INFO<span class="w">  </span>p.a.d.HikariCPConnectionPool<span class="w"> </span>-<span class="w"> </span>Creating<span class="w"> </span>Pool<span class="w"> </span><span class="k">for</span><span class="w"> </span>datasource<span class="w"> </span><span class="s1">&#39;default&#39;</span>
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:18:07<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>agenda<span class="o">[</span><span class="m">2558</span><span class="o">]</span>:<span class="w"> </span>INFO<span class="w">  </span>p.a.d.HikariCPConnectionPool<span class="w"> </span>-<span class="w"> </span>datasource<span class="w"> </span><span class="o">[</span>default<span class="o">]</span><span class="w"> </span>bound<span class="w"> </span>to<span class="w"> </span>JNDI<span class="w"> </span>as<span class="w"> </span>DefaultDS
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:18:12<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>agenda<span class="o">[</span><span class="m">2558</span><span class="o">]</span>:<span class="w"> </span>INFO<span class="w">  </span>play.api.Play<span class="w"> </span>-<span class="w"> </span>Application<span class="w"> </span>started<span class="w"> </span><span class="o">(</span>Prod<span class="o">)</span><span class="w"> </span><span class="o">(</span>no<span class="w"> </span>global<span class="w"> </span>state<span class="o">)</span>
Dec<span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">18</span>:18:12<span class="w"> </span>ip-172-31-4-87<span class="w"> </span>agenda<span class="o">[</span><span class="m">2558</span><span class="o">]</span>:<span class="w"> </span>INFO<span class="w">  </span>p.c.s.PekkoHttpServer<span class="w"> </span>-<span class="w"> </span>Listening<span class="w"> </span><span class="k">for</span><span class="w"> </span>HTTP<span class="w"> </span>on<span class="w"> </span>/<span class="o">[</span><span class="m">0</span>:0:0:0:0:0:0:0<span class="o">]</span>:80
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>